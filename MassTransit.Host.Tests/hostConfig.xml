<?xml version="1.0" encoding="utf-8" ?>
<castle>
	<components>

		<component id="serverEndpoint"
				   lifestyle="singleton"
				   service="MassTransit.ServiceBus.IEndpoint, MassTransit.ServiceBus"
				   type="MassTransit.ServiceBus.MSMQ.MsmqEndpoint, MassTransit.ServiceBus.MSMQ"
				   >
			<parameters>
				<uriString>msmq://localhost/test_server</uriString>
			</parameters>
		</component>


		<component id="managerEndpoint"
				   lifestyle="singleton"
				   service="MassTransit.ServiceBus.IEndpoint, MassTransit.ServiceBus"
				   type="MassTransit.ServiceBus.MSMQ.MsmqEndpoint, MassTransit.ServiceBus.MSMQ"
				   >
			<parameters>
				<uriString>msmq://localhost/test_subscriptions</uriString>
			</parameters>
		</component>

		<component id="serverCache"
				   lifestyle="singleton"
				   service="MassTransit.ServiceBus.Subscriptions.ISubscriptionCache, MassTransit.ServiceBus"
				   type="MassTransit.ServiceBus.Subscriptions.LocalSubscriptionCache, MassTransit.ServiceBus"
				   />

		<component id="serverServiceBus"
				   lifestyle="singleton"
				   service="MassTransit.ServiceBus.IServiceBus, MassTransit.ServiceBus"
				   type="MassTransit.ServiceBus.ServiceBus, MassTransit.ServiceBus"
				   >
			<parameters>
				<endpoint>${serverEndpoint}</endpoint>
			</parameters>
		</component>

		<component id="AsubsriptionClient"
				   lifestyle="singleton"
				   service="MassTransit.ServiceBus.IMessageService, MassTransit.ServiceBus"
				   type="MassTransit.ServiceBus.Subscriptions.SubscriptionClient, MassTransit.ServiceBus"
				   >
			<parameters>
				<managerEndpoint>${managerEndpoint}</managerEndpoint>
			</parameters>
		</component>

		<component id="mySimpleServer"
				   lifestyle="singleton"
				   service="MassTransit.ServiceBus.IMessageService, MassTransit.ServiceBus"
				   type="MassTransit.Host.Tests.SimpleMessageServer, MassTransit.Host.Tests"
				   >
		</component>

	</components>
  <facilities>
    <facility id="nhibernate" isWeb="true|false" customStore="typename for a class that implements ISessionStore">
      <factory id="nhibernate.factory">
        <settings>
          <item key="hibernate.connection.provider">
            NHibernate.Connection.DriverConnectionProvider
          </item>
          <item key="hibernate.connection.driver_class">
            NHibernate.Driver.SqlClientDriver
          </item>
          <item key="hibernate.connection.connection_string">
            Database=masstransit;Data Source=localhost
          </item>
          <item key="hibernate.dialect">
            NHibernate.Dialect.MsSql2005Dialect
          </item>
        </settings>
        <!--
        <resources>
          <resource name="hbm.xml file location" />
          <resource assembly="assembly name" name="hbm.xml file name" />
        </resources>
        -->
        <assemblies>
          <!--
          <assembly>MassTransit.SubscriptionStorage</assembly>
          -->
          <assembly>assembly name</assembly>
        </assemblies>
      </factory>
    </facility>
  </facilities>
</castle>